<?xml version="1.0"?>
<document>
    <properties>
        <title>Transcoding</title>
        <author email="sindre@activeobjects.no">Sindre Mehus</author>
    </properties>


    <body>

        <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
        <script type="text/javascript">
            _uacct = 'UA-110410-1';
            urchinTracker();
        </script>

        <section name="Transcoding">
            <p>
                Transcoding is the process of converting from one media format to another. Subsonic's transcoding engine allows for
                streaming of media that would normally not be streamable, for instance lossless formats. The transcoding is
                performed on-the-fly and doesn't require any disk usage.
            </p>
            <p>
                The actual transcoding is done by third-party command line programs which must be installed in c:\subsonic\transcode
                (on Windows), /var/subsonic/transcode (other operating systems), or in a directory present in the PATH environment
                variable.
            </p>
            <p>
                Up to three transcoders can be chained together. For instance, to convert FLAC to MP3 you would typically use a FLAC
                decoder which converts to WAV, and chain it with a WAV to MP3 encoder.
            </p>
            <subsection name="Transcoding pack for Windows">
                <p>
                    A transcoding pack for Windows with a selection of codecs can be <a href="transcode_windows.zip"><b>downloaded here</b></a>.
                    It supports the following media types:
                    <ul>
                        <li>MP3</li>
                        <li>Ogg Vorbis</li>
                        <li>FLAC (Free Lossless Audio Codec)</li>
                        <li>AAC/MP4</li>
                        <li>WMA</li>
                        <li>WAV</li>
                        <li>APE (Monkey's Audio)</li>
                        <li>MPC (Musepack)</li>
                        <li>WavPack</li>
                        <li>SHN (Shorten)</li>
                        <li>OptimFROG Lossless and DualStream</li>
                    </ul>
                </p>
            </subsection>

            <subsection name="Adding new transcoders">
                <p>
                    You can add your own custom transcoder given that it fulfills the following requirements:
                    <ul>
                        <li>It must have a command line interface.</li>
                        <li>It must be able to send output to stdout.</li>
                        <li>If used in transcoding step 2 or 3, it must be able to read input from stdin.</li>
                    </ul>
                </p>

            </subsection>

            <subsection name="Example configuration">
                <table>
                    <tr><th>Name</th><th>Convert from</th><th>Convert to</th><th>Step 1</th><th>Step 2</th></tr>
                    <tr><td>wav &gt; mp3 </td><td>wav </td><td>mp3</td><td>lame -b %b -S %s -</td><td/></tr>
                    <tr><td>ogg &gt; mp3 </td><td>ogg </td><td>mp3</td><td>oggdec %s -o</td><td>lame -b %b - -</td></tr>
                    <tr><td>wma &gt; mp3 </td><td>wma </td><td>mp3</td><td>wmadec %s</td><td>lame -b %b -x - -</td></tr>
                    <tr><td>flac &gt; mp3</td><td>flac</td><td>mp3</td><td>flac -c -s -d %s</td><td>lame -b %b - -</td></tr>
                    <tr><td>ape &gt; mp3 </td><td>ape </td><td>mp3</td><td>mac %s - -d</td><td>lame -b %b - -</td></tr>
                    <tr><td>m4a &gt; mp3 </td><td>m4a </td><td>mp3</td><td>faad -w %s</td><td>lame -b %b -x - -</td></tr>
                    <tr><td>mpc &gt; mp3 </td><td>mpc </td><td>mp3</td><td>mppdec --wav --silent %s -</td><td>lame -b %b - -</td></tr>
                    <tr><td>ofr &gt; mp3 </td><td>ofr </td><td>mp3</td><td>ofr --decode --silent %s --output -</td><td>lame -b %b - -</td></tr>
                    <tr><td>wv &gt; mp3  </td><td>wv  </td><td>mp3</td><td>wvunpack -q %s -</td><td>lame -b %b - -</td></tr>
                    <tr><td>shn &gt; mp3 </td><td>shn </td><td>mp3</td><td>shorten -x %s -</td><td>lame -b %b - -</td></tr>
                </table>
                <p>
                    Note that "%s" is substituted with the path of the original file at run-time, and "%b" is substituted with the
                    max bitrate of the player.
                </p>
            </subsection>

            <subsection name="Troubleshooting">
                <ul>
                    <li>Is the transcoder installed in c:\subsonic\transcode (or /var/subsonic/transcode)?</li>
                    <li>Is the transcoder's enabled checkbox turned on (in Settings &gt; Transcoders)?</li>
                    <li>Is the transcoder activated for your player (in Settings &gt; Players)?</li>
                    <li>Is the proper file extension added to the music mask (in Settings &gt; General)?</li>
                    <li>If it still doesn't work, please check the Subsonic log.</li>
                </ul>
            </subsection>
        </section>
    </body>
</document>

